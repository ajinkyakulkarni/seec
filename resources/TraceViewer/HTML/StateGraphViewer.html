<html>
 <head>
  <script src="icurb:TraceViewer/StateGraphViewer/jquery-1.8.2.min.js" type="text/javascript"></script>
  <script src="icurb:TraceViewer/StateGraphViewer/jquery.ui.position.js" type="text/javascript"></script>
  <script src="icurb:TraceViewer/StateGraphViewer/jquery.contextMenu.js" type="text/javascript"></script>

  <link href="icurb:TraceViewer/StateGraphViewer/jquery.contextMenu.css" rel="stylesheet" type="text/css" />
  <link href="icurb:TraceViewer/StateGraphViewer/Styles.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript">
    // Clear the debug log.
    //
    function LogClear() {
      document.getElementById("Log").innerHTML = "";
    }

    // Add a debug message to the log.
    //
    function Log(Message) {
      var Container = document.getElementById("Log");
      
      Container.innerHTML = Container.innerHTML
			    + "<span>" + Message
                            + "</span><br>";
    }

    // Event handlers for the context menu items.
    //

    function DoRewindInitialisation() {
      Log("Rewind init");
    }

    function DoRewindLastModify() {
      Log("Rewind last");
    }

    function DoForwardNextModify() {
      Log("Forward next");
    }

    function DoForwardDeallocation() {
      Log("Forward deallocation");
    }

    function FakeAnchorClick(e) {
      e.preventDefault();
    }

    // Called from seec-trace-viewer to set a new state display.
    //
    var SetStateImplTimer = null;
    
    function SetStateImpl(SVGString) {
      SetStateImplTimer = null;
      
      var Container = document.getElementById("SVGContainer");
      Container.innerHTML = SVGString;

      $('title').remove();

      var refs = $('a');
      refs.click(FakeAnchorClick);
      refs.removeAttr("xlink:title");

      refs.each(function(){
        this.classList.add("seecValue");
      });
    }
    
    function SetState(SVGString) {
      if (SetStateImplTimer != null)
        window.clearTimeout(SetStateImplTimer);
      
      LogClear();
      
      SetStateImplTimer = setTimeout(function() { SetStateImpl(SVGString); },
                                     0);
    }

    // Called from seec-trace-viewer to clear the state display.
    //
    function ClearState() {
      document.getElementById("SVGContainer").innerHTML = "";
    }
  </script>
 </head>
 <body>
  <div id="SVGContainer"></div>
  <div id="Log"></div>
 </body>
</html>

